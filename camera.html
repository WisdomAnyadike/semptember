<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>
        <video id="vid" autoplay> </video>
        <button id="pic" onclick="takePic()"> take </button>
    </div>

    <button id="cam" onclick="startCam()"> start </button>
    <canvas width="100px" height="100px" id="canvas"> </canvas>

    <img width="300px" height="300px" id="img" alt="">

</body>

</html>
<script>
    let gallery = JSON.parse(localStorage.getItem('gallery')) || []

    async function startCam() {
        let stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false })
        vid.srcObject = stream

    }

    function takePic() {
        canvas.getContext('2d').drawImage(vid, 0, 0, canvas.width, canvas.height)
        let pic = canvas.toDataURL('image/jpeg')
        console.log(pic);
        gallery.push(pic)

    }



</script>